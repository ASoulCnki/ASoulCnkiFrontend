<template>
  <div class="item w-full p-2 my-4 bg-gray-100 rounded-md dark:bg-gray-600 dark:text-gray-300 overflow-hidden">
    <div class="item-head p-2">
      <span class="py-3">
        <svg class="h-6 m-0 pt-1 translate-y-1 px-1 w-auto float-left" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#707070" d="M707.797333 304.426667c0-114.218667-93.354667-206.805333-208.512-206.805334-115.157333 0-208.512 92.586667-208.512 206.805334 0 114.218667 93.354667 206.805333 208.512 206.805333 115.2 0 208.512-92.586667 208.512-206.805333m292.053334 656c1.365333 4.437333 2.304 9.088 2.304 13.994666 0 26.88-21.930667 48.725333-49.024 48.725334a48.853333 48.853333 0 0 1-48.981334-48.725334v-0.170666h-1.28c-12.757333-203.904-182.741333-365.482667-391.168-365.482667-208.469333 0-378.453333 161.578667-391.253333 365.482667h-1.109333v0.170666c0 26.88-21.930667 48.725333-48.981334 48.725334A48.853333 48.853333 0 0 1 21.333333 974.421333c0-4.608 0.853333-8.96 2.048-13.226666 14.250667-185.045333 131.882667-341.248 296.149334-410.88C243.2 494.976 193.28 405.589333 193.28 304.426667 193.28 136.32 330.453333 0 499.626667 0c169.216 0 306.346667 136.32 306.346666 304.426667a302.933333 302.933333 0 0 1-118.186666 239.914666c172.202667 66.005333 297.088 225.536 312.064 416.085334"  /></svg>
        <a
          :href="'https://space.bilibili.com/' + article.author.id"
          target="_blank"
          class="text-blue-500 dark:text-blue-300"
          :title="article.author.name"
        >
          {{ article.author.name.substring(0,7) }}
        </a>
      <span 
        class="py-3 text-red-500 font-bold dark:text-yellow-500"
        title="鉴定为[原创/原偷],请根据情况自行判断是否属实"
        v-if="article.originReplyId < 0"
      >
        [原创/原偷]
      </span>
      </span>
      <span class="float-right">
        <a :href="article.url" target="_blank" class="text-blue-400 dark:text-blue-300">
          <svg class="h-6 m-0 pt-1 px-1 w-auto float-left" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#707070" d="M738.397287 67.493184c-56.880475 0-114.188692 21.47715-157.898193 64.020082l-146.097426 144.341433c-13.179161 13.282514-13.179161 34.827203 0 48.080042 13.704117 13.08911 35.753295 13.08911 49.027623 0l146.099473-144.044674 0.462534 0c29.508058-29.455869 69.13559-44.00319 108.405989-44.00319 85.23936 0 153.491837 67.230194 153.491837 151.340847 0 38.649252-14.749936 77.564563-44.62536 107.111506L688.320775 551.152718c-29.842679 28.54308-68.548212 43.091424-107.821681 43.091424-53.92312 0-104.430444-28.547173-131.934868-73.998341-6.375198-10.854209-11.69946-22.487154-15.214517-34.345226-5.291516-18.146289-24.384363-28.252461-43.117007-22.968108-18.036795 5.310959-28.389584 24.425296-23.034623 42.343387 5.425569 16.881482 12.787234 33.794687 22.576181 49.505507l0 0.291642c39.73191 65.484434 111.826901 106.787118 190.724833 106.787118 56.391335 0 112.815415-20.796652 155.992797-62.368466l159.247934-157.070338c43.145659-42.544979 64.700581-99.110275 64.700581-155.195641C960.440405 165.66304 861.46009 67.493184 738.397287 67.493184zM540.773324 696.206372l0-0.002047L394.673851 840.48129c-59.279105 58.544371-158.39245 58.772568-217.638809 0.228197l0-0.228197c-59.377342-58.483996-59.377342-155.907862 0-214.32432l157.307745-155.712411c30.001291-28.966729 69.168336-43.768853 108.899222-43.768853 39.729863 0 78.901001 14.804171 108.869546 43.768853l0 0.452301c9.29776 8.943696 16.663518 18.919908 23.036669 29.54899 6.800893 10.624988 11.69946 22.224164 15.214517 33.794687 5.351891 18.371416 24.512277 28.54308 42.556235 23.228027 18.173918-5.310959 28.982078-24.169469 23.624047-42.312688-5.454222-17.396205-12.846586-34.082236-21.554922-49.536206-9.891278-15.486716-21.096481-30.001291-33.847899-43.062771-43.703361-42.573631-100.553137-64.018036-157.898193-64.018036-57.308217 0-114.190739 21.444405-157.8941 64.018036L127.975696 578.013483c-85.804225 84.819804-85.804225 225.76079 0 311.034942l2.39863 1.74883c86.259596 82.876546 226.610134 82.166371 312.407196-1.227967l0-0.51984 0.460488-0.452301 146.560984-144.048767c13.272281-13.510712 13.272281-34.799574-0.458441-48.340985C576.066131 683.115216 554.047652 683.115216 540.773324 696.206372z" /></svg>
          传送门
        </a>
      </span>
      <span 
        class="float-right borde px-5 mx-2 rounded-md bg-blue-400 text-white dark:bg-gray-500 dark:text-gray-300" 
        :id="'copy'+article.replyId+article.id"
        title="一键偷走"
      >
        复制
      </span>
    </div>
    <div class="item-body rounded-md p-4 bg-gray-200
    dark:bg-gray-800 dark:text-gray-300 leading-normal whitespace-pre-wrap overflow-hidden">{{ article.content }}</div>
    <div class="text-2xl pt-2 grid grid-cols-2 lg:grid-cols-4 w-full">
      <span class="mt-1" title="总点赞数,把所有偷这篇小作文的赞累加上来">
        <svg class="h-9 m-0 px-2 pr-4 float-left" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#707070" d="M581.674667 170.666667c6.72 0 18.538667 1.429333 27.584 4.352 44.544 14.442667 70.186667 61.76 59.797333 109.12l-1.066667 4.437333-39.701333 148.906667h157.269333c19.093333 0 37.973333 7.082667 50.773334 21.248 14.293333 15.829333 19.861333 36.778667 15.616 57.109333l-1.066667 4.352-82.922667 295.253333a51.882667 51.882667 0 0 1-46.08 37.76l-3.84 0.128H298.666667V452.501333c84.949333-18.389333 209.194667-244.373333 209.194666-244.373333C525.525333 184.170667 546.944 170.666667 581.674667 170.666667zM234.666667 448v405.333333H170.666667V448h64z" /></svg>
        {{article.totalLikeSum}}
      </span>
      <span class="mt-1" title="点赞数">
        <svg class="h-9 m-0 px-2 float-left" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#707070" d="M581.674667 170.666667c6.72 0 18.538667 1.429333 27.584 4.352 44.544 14.442667 70.186667 61.76 59.797333 109.12l-1.066667 4.437333-39.701333 148.906667h157.269333c19.093333 0 37.973333 7.082667 50.773334 21.248 14.293333 15.829333 19.861333 36.778667 15.616 57.109333l-1.066667 4.352-82.922667 295.253333a51.882667 51.882667 0 0 1-46.08 37.76l-3.84 0.128H298.666667V452.501333c84.949333-18.389333 209.194667-244.373333 209.194666-244.373333C525.525333 184.170667 546.944 170.666667 581.674667 170.666667zM234.666667 448v405.333333H170.666667V448h64z m347.008-213.333333c-9.6 0-13.546667 1.109333-18.453334 6.613333l-1.706666 2.005333-8.064 14.08-8.64 14.613334a1342.848 1342.848 0 0 1-63.189334 96.426666c-24.512 33.92-48.597333 63.146667-72.234666 86.464-15.722667 15.509333-31.146667 28.437333-46.72 38.464V789.333333h346.154666L789.333333 502.485333c0-0.277333-0.128-0.448-0.490666-0.853333 0.298667 0.341333-0.853333-0.149333-3.285334-0.149333H544.981333l61.162667-229.44c4.394667-16.426667-3.626667-31.936-16.597333-36.138667a46.016 46.016 0 0 0-7.893334-1.237333z" /></svg>
        {{article.likeNum}}
      </span>
      <span class="mt-1" title="引用数">
        <svg class="h-7 m-0 px-3 pr-5 float-left" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#707070" d="M277.942857 416.914286h285.257143V204.8H219.428571v51.2h292.571429V365.714286H219.428571v219.428571h292.571429c0 87.771429-7.314286 146.285714-14.628571 168.228572-7.314286 21.942857-36.571429 36.571429-95.085715 36.571428h-73.142857l14.628572 51.2h65.828571c80.457143 0 124.342857-21.942857 131.657143-65.828571 21.942857-36.571429 29.257143-117.028571 29.257143-234.057143h-292.571429V416.914286zM950.857143 0H73.142857C36.571429 0 0 36.571429 0 73.142857v877.714286c0 36.571429 36.571429 73.142857 73.142857 73.142857h877.714286c36.571429 0 73.142857-36.571429 73.142857-73.142857V73.142857c0-36.571429-36.571429-73.142857-73.142857-73.142857z m21.942857 950.857143c0 14.628571-7.314286 21.942857-21.942857 21.942857H73.142857c-14.628571 0-21.942857-7.314286-21.942857-21.942857V73.142857C51.2 58.514286 58.514286 51.2 73.142857 51.2h877.714286c14.628571 0 21.942857 7.314286 21.942857 21.942857v877.714286zM731.428571 848.457143h51.2V175.542857H731.428571v672.914286z" /></svg>
        {{article.similarCount}}
      </span>
      <span class="mt-1" title="发布时间">
        <svg class="h-9 m-0 px-2 float-left" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#707070" d="M512 149.333333c200.298667 0 362.666667 162.368 362.666667 362.666667s-162.368 362.666667-362.666667 362.666667S149.333333 712.298667 149.333333 512 311.701333 149.333333 512 149.333333z m0 64c-164.949333 0-298.666667 133.717333-298.666667 298.666667s133.717333 298.666667 298.666667 298.666667 298.666667-133.717333 298.666667-298.666667-133.717333-298.666667-298.666667-298.666667z m32 78.485334v201.130666h140.757333v64H512a32 32 0 0 1-32-32V291.84h64z" /></svg>
        {{ article.createTime }}
      </span>
    </div>
  </div>
</template>

<script>
export default {
  name: 'RankArticle',
  props: {
    article: Object
  },
  data() {
    return {
      clipboard: null
    }
  },
  methods: {
    notify(s, type) {
      this.$message({showClose: true, message: s, type: type})
    }
  },
  mounted() {
    const clipboard = new ClipboardJS('#copy' + this.article.replyId + this.article.id, {
      text: () => this.article.content
    })
    clipboard.on("success", () => this.notify('复制成功,适度玩梗捏', 'success'));
    clipboard.on("error", () => this.notify('复制失败，请手动复制', 'warning'))
    this.clipboard = clipboard
  }
}
</script>